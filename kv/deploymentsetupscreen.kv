<DeploymentSetupScreen>:
    name: 'deployment_setup'
    p1_name_label: p1_name_dsp_lbl
    p1_roll_button: p1_roll_dsp_btn
    p1_roll_display_label: p1_roll_dsp_lbl
    p1_choice_box: p1_choice_dsp_box

    p2_name_label: p2_name_dsp_lbl
    p2_roll_button: p2_roll_dsp_btn
    p2_roll_display_label: p2_roll_dsp_lbl
    p2_choice_box: p2_choice_dsp_box

    deployment_status_label: deployment_status_dsp_lbl
    continue_to_first_turn_button: continue_to_ft_btn

    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            source: 'assets/background.png'
            pos: self.pos
            size: self.size

    BoxLayout: # Main Root
        orientation: 'vertical'
        HeaderLayout:
            title_text: 'Deployment - Time to move em out'
        SubHeaderLayout:
            title_text: 'Roll for who deploys first. Winner chooses Attacker/Defender'
        Label: # Central Status Label
            id: deployment_status_dsp_lbl
            text: 'Roll for Deployment Attacker/Defender'
            font_size: '18sp'
            size_hint_y: None
            height: dp(30)
            halign: 'center'
            valign: 'middle'
            text_size: self.width, None
        GridLayout:
            cols: 2
            padding: dp(20)
            spacing: dp(20)
            size_hint_y: None
            height: self.minimum_height

           # Player 1 Area
            BoxLayout:
                orientation: 'vertical'
                spacing: dp(8)
                size_hint_y: None
                height: self.minimum_height

                Label:
                    id: p1_name_dsp_lbl
                    text: 'Player 1 Roll'
                    font_name: 'InterBlack'
                    font_size: '20sp'
                    size_hint_y: None
                    height: dp(30)
                Label:
                    id: p1_roll_dsp_lbl
                    text: 'None'
                    font_name: 'InterBlack'
                    font_size: '72sp'
                    size_hint_y: None
                    height: dp(72)
                BoxLayout: # P1 Choice Box (for Attacker/Defender buttons)
                    id: p1_choice_dsp_box
                    orientation: 'vertical'
                    size_hint_y: None
                    height: dp(80) # Space for two buttons
                    spacing: dp(5)
                    opacity: 0 # Hidden initially
                    Player1Button:
                        id: p1_roll_dsp_btn
                        text: 'Roll'
                        on_press: root.roll_deployment_initiative(1)
                        size_hint_y: None
                        height: dp(40)
                    Player1Button:
                        id: p1_roll_dsp_btn
                        text: 'Roll'
                        on_press: root.roll_deployment_initiative(1)
                        size_hint_y: None
                        height: dp(40)
                    
                Player1Button:
                    id: p1_roll_dsp_btn
                    text: 'Roll'
                    on_press: root.roll_deployment_initiative(1)
                    size_hint_y: None
                    height: dp(40)

            # Player 2 Area
            BoxLayout:
                orientation: 'vertical'
                spacing: dp(8)
                size_hint_y: None
                height: self.minimum_height

                Label:
                    id: p2_name_dsp_lbl
                    text: 'Player 2'
                    font_name: 'InterBlack'
                    font_size: '20sp'
                    size_hint_y: None
                    height: dp(30)
                Label:
                    id: p2_roll_dsp_lbl
                    text: 'None'
                    font_name: 'InterBlack'
                    font_size: '72sp'
                    size_hint_y: None
                    height: dp(72)
                BoxLayout: # P2 Choice Box
                    id: p2_choice_dsp_box
                    orientation: 'vertical'
                    size_hint_y: None
                    height: dp(80)
                    spacing: dp(5)
                    Player2Button:
                        id: somebutton
                        text: 'Attacker'
                        size_hint_y: None
                        height: dp(40)
                    Player2Button:
                        id: somebutton2
                        text: 'Defender'
                        size_hint_y: None
                        height: dp(40)

                Player2Button:
                    id: p2_roll_dsp_btn
                    text: 'Roll'
                    on_press: root.roll_deployment_initiative(2)
                    size_hint_y: None
                    height: dp(40)

        Widget: # Spacer
            size_hint_y: 0.1

        Button:
            id: continue_to_ft_btn
            text: 'Units Deployed - Continue to First Turn Roll'
            font_size: '20sp'
            size_hint_y: None
            height: dp(50)
            on_press: root.proceed_to_first_turn_setup()
            disabled: True 