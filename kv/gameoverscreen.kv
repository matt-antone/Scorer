<GameOverScreen>:
    name: 'game_over'
    canvas.before:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            source: 'assets/background.png'
            pos: self.pos
            size: self.size
    result_status_label: subhead
    p1_final_name_label: p1_name_final_lbl
    p1_final_score_label: p1_score_final_lbl
    p1_final_cp_label: p1_cp_final_lbl
    p1_final_time_label: p1_time_final_lbl
    p2_final_name_label: p2_name_final_lbl
    p2_final_score_label: p2_score_final_lbl
    p2_final_cp_label: p2_cp_final_lbl
    p2_final_time_label: p2_time_final_lbl
    total_game_time_label: total_time_final_lbl
    rounds_played_label: rounds_played_final_lbl
    exit_button: exit_btn_gos

    BoxLayout: # New Main Root
        orientation: 'vertical'
        HeaderLayout:
            title_text: 'Game Over' # Set the property
            Label:
                id: total_time_final_lbl
                text: 'Total Game Time: 00:00:00'
                font_size: '18sp'
                halign: 'center'
                size_hint_y: None
            Label:
                id: rounds_played_final_lbl
                text: 'Rounds Played: 5'
                font_size: '18sp'
                size_hint_y: None
        SubHeaderLayout:
            id: subhead

        # Original Root BoxLayout for GameOverScreen content
        GridLayout:
            cols: 2
            spacing: dp(20)
            padding: dp(20)
            size_hint_y: 0.6 # Give it some substantial height

            # Player 1 Final Stats
            BoxLayout:
                id: p1_panel_id
                orientation: 'vertical'
                size_hint_y: None
                height: self.minimum_height
                InterBlack:
                    id: p1_name_final_lbl
                    text: 'Player 1'
                    font_size: '24sp'
                    text_size: self.width, None
                    halign: 'left' # Align left as requested
                    valign: 'top'
                    size_hint_y: None
                    height: self.texture_size[1] + dp(5)
                InterBlack:
                    id: p1_name_label_id
                    text: 'Attacker'
                    font_size: '12sp'
                    text_size: self.width, None
                    halign: 'left' # Align left as requested
                    valign: 'top'
                    size_hint_y: None
                    height: self.texture_size[1] + dp(5)
                BoxLayout:
                    orientation: 'vertical'
                    valign: 'bottom'
                    size_hint_y: None
                    height: self.minimum_height
                    InterBlack:
                        id: p1_score_final_lbl
                        text: '0'
                        font_size: '96sp'
                        text_size: self.width, None
                        halign: 'left' # Align left as requested
                        valign: 'top'
                        size_hint_y: None
                        height: self.texture_size[1] + dp(5)
                        width: self.texture_size[0]
                    BoxLayout:
                        orientation: 'horizontal'
                        size_hint_y: None
                        height: self.minimum_height
                        InterBlack:
                            id: p1_cp_final_lbl
                            text: 'Command Points: 0'
                            font_size: '18sp'
                            text_size: self.width, None
                            halign: 'left' # Align left as requested
                            valign: 'top'
                            size_hint_y: None
                            height: self.texture_size[1] + dp(5)
                        InterBlack:
                            id: p1_time_final_lbl
                            text: '00:00:00'
                            font_size: '18sp'
                            text_size: self.width, None
                            halign: 'left' # Align left as requested
                            valign: 'top'
                            size_hint_y: None
                            height: self.texture_size[1] + dp(5)
            # Player 2 Final Stats
            BoxLayout:
                orientation: 'vertical'
                spacing: dp(5)
                InterBlack:
                    id: p2_name_final_lbl
                    text: 'Player 2'
                    font_size: '24sp'
                    text_size: self.width, None
                    halign: 'right' # Align right as requested
                    valign: 'top'
                    size_hint_y: None
                    height: self.texture_size[1] + dp(5)
                InterBlack:
                    id: p1_name_label_id
                    text: 'Attacker'
                    font_size: '12sp'
                    text_size: self.width, None
                    halign: 'right' # Align right as requested
                    valign: 'top'
                    size_hint_y: None
                    height: self.texture_size[1] + dp(5)
                BoxLayout:
                    orientation: 'vertical'
                    valign: 'bottom'
                    size_hint_y: None
                    height: self.minimum_height
                    InterBlack:
                        id: p2_score_final_lbl
                        text: '0'
                        font_size: '96sp'
                        text_size: self.width, None
                        halign: 'right' # Align right as requested
                        valign: 'top'
                        size_hint_y: None
                        height: self.texture_size[1] + dp(5)
                        width: self.texture_size[0]
                    BoxLayout:
                        orientation: 'horizontal'
                        valign: 'bottom'
                        size_hint_y: None
                        height: self.minimum_height
                        InterBlack:
                            id: p2_time_final_lbl
                            text: '00:00:00'
                            font_size: '18sp'
                            text_size: self.width, None
                            halign: 'right' # Align right as requested
                            valign: 'top'
                            size_hint_y: None
                            height: self.texture_size[1] + dp(5)
                        InterBlack:
                            id: p2_cp_final_lbl
                            text: 'Command Points: 0'
                            font_size: '18sp'
                            text_size: self.width, None
                            halign: 'right' # Align right as requested
                            valign: 'top'
                            size_hint_y: None
                            height: self.texture_size[1] + dp(5)
        
        Label: # Spacer to push game stats and buttons down a bit
            size_hint_y: 0.1

        Widget: # Spacer
            size_hint_y: 0.3

        BoxLayout:
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(50)
            spacing: dp(20)
            Button:
                text: 'Start New Game'
                font_size: '20sp'
                on_press: root.start_new_game()
            Button:
                id: exit_btn_gos
                text: 'Exit Application'
                font_size: '20sp'
                on_press: root.exit_app_from_game_over() 