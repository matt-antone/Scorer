#:kivy 2.2.1
#:import UI_STRINGS pi_app.strings.UI_STRINGS

<InitiativeScreen>:
    title: UI_STRINGS['initiative']['title']
    canvas.before:
        Color:
            rgba: 0.1, 0.1, 0.1, 1
        Rectangle:
            pos: self.pos
            size: self.size

    BoxLayout:
        orientation: 'vertical'
        padding: '20dp'
        spacing: '20dp'

        Label:
            text: UI_STRINGS['initiative']['title']
            font_size: '32sp'
            color: 1, 1, 1, 1
            size_hint_y: None
            height: '60dp'

        Label:
            id: status_label
            text: "Roll for Initiative!"
            font_size: '24sp'
            color: 1, 1, 1, 1
            size_hint_y: None
            height: '40dp'

        # Player 1 Section
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '200dp'

            Label:
                id: p1_name_label
                text: UI_STRINGS['common']['player1']
                font_size: '24sp'
                color: 1, 1, 1, 1
                size_hint_y: None
                height: '40dp'

            Label:
                id: p1_roll_label
                text: UI_STRINGS['initiative']['roll_empty']
                font_size: '36sp'
                color: 1, 1, 1, 1
                size_hint_y: None
                height: '60dp'

            BoxLayout:
                id: p1_choice_box
                orientation: 'horizontal'
                size_hint_y: None
                height: '50dp'
                opacity: 0
                disabled: True
                spacing: '10dp'

                Button:
                    text: "Player 1 Goes First"
                    font_size: '20sp'
                    on_release: root.select_first_turn(root.ids.p1_name_label.text)

                Button:
                    text: "Player 2 Goes First"
                    font_size: '20sp'
                    on_release: root.select_first_turn(root.ids.p2_name_label.text)

            Button:
                id: p1_roll_button
                text: UI_STRINGS['common']['roll']
                font_size: '20sp'
                size_hint_y: None
                height: '50dp'
                on_release: root.roll_player1()

        # Player 2 Section
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: '200dp'

            Label:
                id: p2_name_label
                text: UI_STRINGS['common']['player2']
                font_size: '24sp'
                color: 1, 1, 1, 1
                size_hint_y: None
                height: '40dp'

            Label:
                id: p2_roll_label
                text: UI_STRINGS['initiative']['roll_empty']
                font_size: '36sp'
                color: 1, 1, 1, 1
                size_hint_y: None
                height: '60dp'

            BoxLayout:
                id: p2_choice_box
                orientation: 'horizontal'
                size_hint_y: None
                height: '50dp'
                opacity: 0
                disabled: True
                spacing: '10dp'

                Button:
                    text: "Player 1 Goes First"
                    font_size: '20sp'
                    on_release: root.select_first_turn(root.ids.p1_name_label.text)

                Button:
                    text: "Player 2 Goes First"
                    font_size: '20sp'
                    on_release: root.select_first_turn(root.ids.p2_name_label.text)

            Button:
                id: p2_roll_button
                text: UI_STRINGS['common']['roll']
                font_size: '20sp'
                size_hint_y: None
                height: '50dp'
                on_release: root.roll_player2()

        # Continue Button
        Button:
            id: continue_button
            text: UI_STRINGS['initiative']['continue']
            font_size: '24sp'
            size_hint_y: None
            height: '60dp'
            opacity: 0
            disabled: True
            on_release: root.continue_to_game() 